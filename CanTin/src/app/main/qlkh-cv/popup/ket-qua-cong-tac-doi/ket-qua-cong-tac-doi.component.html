<div bsModal #ketQuaCongTacDoiModal="bs-modal" class="modal fade" tabindex="1" role="dialog"
    aria-labelledby="ketQuaCongTacDoiModal" aria-hidden="true" [config]="{ backdrop: 'static' }">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <form novalidate  autocomplete="off">
                <div class="modal-header">
                    <h3 class="modal-title">
                        Cập nhật kết quả công tác cấp đội
                    </h3>
                </div>
                <div class="modal-body">
                    <h5>Báo cáo kết quả</h5>
                    <div class="row btm_spacing">
                        <div class="col-md-2">
                            <!-- <label class="dx-texteditor-input" style="color: #646c9a">Đơn vị /CBCS được giao</label> -->
                            <label class="dx-texteditor-input" style="color: black">Đơn vị /CBCS được giao</label>
                        </div>
                        <div class="col-md-10" style="font-weight: bold;" >
                            <dx-text-box [(value)]="formData.userFullName" [visible]="formData.userId > 0" [readOnly]="true"></dx-text-box>
                            <dx-text-box [(value)]="formData.orgName" [visible]="formData.orgId > 0"  [readOnly]="true"></dx-text-box>
                        </div>
                    </div>
                    <!-- <br> -->
                    <div class="row btm_spacing">
                        <div class="col-md-2">
                            <label class="dx-texteditor-input" style="color: black">Nội dung công việc được giao</label>
                        </div>
                        <div class="col-md-10"> 
                                <dx-text-area style="font-weight: bold;" [(value)]="formData.assignContent"  [readOnly]="true" [elementAttr]="{
                                     class: 'revealLine'
                                }" [autoResizeEnabled]="true"></dx-text-area>
                        </div>
                    </div>
                    <!-- <br> -->
                    <div class="row btm_spacing">
                        <div class="col-md-2">
                            <label class="dx-texteditor-input" style="color: black">Hạn thực hiện</label>
                        </div>
                        <div class="col-md-10"> 
                            <dx-date-box style="font-weight: bold;" [value]="formData.deadline" [displayFormat]="'dd/MM/yyyy'"  [readOnly]="true"></dx-date-box>
                        </div>
                    </div>
                    <!-- <br> -->
                    <!-- <h5>Báo cáo kết quả công tác</h5> -->
                    <h5>Chi tiết</h5>
                    <div class="row btm_spacing">
                        <div class="col-md-12">
                            <dx-button icon="plus" text="Thêm mới" type="success" (onClick)="add()"></dx-button>
                        </div>
                        
                        <div class="col-md-12">
                            
                            <dx-data-grid #gridContainerOrg id="gridContainerOrg"
                                [remoteOperations]="false" [allowColumnReordering]="true"
                                [rowAlternationEnabled]="true" [allowColumnResizing]="true"
                                [dataSource]="store"
                                columnResizingMode="widget" [showBorders]="true"
                                >
                                <dxo-editing mode="row" [allowUpdating]="true" [allowDeleting]="true" [texts]="{
                                    editRow: 'Chỉnh sửa',
                                    deleteRow: 'Xóa'
                                }" [useIcons]="true"></dxo-editing>
                                <dxo-paging [enabled]="false"></dxo-paging>
                                <dxi-column dataField="stt" columnIndex="1" caption="STT" alignment="center"
                                [width]="5+'%'" cellTemplate="sttCellTemplate" [allowEditing]="false"></dxi-column>
                                <dxi-column [allowFiltering]="true" [cssClass]="'bold'" [format]="'dd/MM/yyyy'"
                                    caption="Ngày báo cáo" dataField="dateReport" dataType="date" width="15%" sortOrder="desc">
                                </dxi-column>
                                <dxi-column [allowFiltering]="true"
                                    caption="Nội dung đã thực hiện" dataField="contentReport" width="35%">
                                </dxi-column>

                                <dxi-column [allowFiltering]="true"
                                    caption="Ghi chú" dataField="note" width="35%">
                                </dxi-column>
                                <!-- <dxi-column [allowFiltering]="true" headerCellTemplate="actionHeaderTemplate"
                                    cellTemplate="actionTemplate"  width="10%">
                                </dxi-column> -->

                                <div *dxTemplate="let info of 'sttCellTemplate'">
                                    <div> {{info.rowIndex + 1}}</div>
                                </div>

                                <div *dxTemplate="let d of 'actionTemplate'" style="text-align: center">
                                    <span (click)="edit(d)"><i class="fa fa-pen" style="color:blue;"></i></span>&nbsp;&nbsp;<span (click)="delete(d)"><i class="fa fa-times" style="color: red;"></i></span>
                                </div>
                                <div *dxTemplate="let d of 'actionHeaderTemplate'">
                                    <span (click)="add()"><i class="fa fa-plus-circle"></i></span>
                                </div>
                            </dx-data-grid>
                        </div>
                    </div>
                    <div class="row btm_spacing">
                        <div class="col-md-2">
                            <label class="dx-texteditor-input" style="color: #646c9a">Nhận xét kết quả công tác</label>
                        </div>
                        <div class="col-md-10">
                            <dx-text-area [(value)]="formData.evaluateContent" [autoResizeEnabled]="true"></dx-text-area>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label class="dx-texteditor-input" style="color: #646c9a">Đánh giá kết quả</label>
                        </div>
                        <div class="col-md-10">
                            <dx-select-box
                                [dataSource]="status_dataSource" 
                                valueExpr="id" 
                                displayExpr="name" 
                                [(value)]="formData.evaluateLevelId">
                            </dx-select-box>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <dx-button icon="save" text="Lưu" type="success" (onClick)="save()" [disabled]="saving" style="margin-right: 0.5rem;"></dx-button>
                    <dx-button icon="close" text="Quay lại" type="normal" (onClick)="close()"></dx-button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    ::ng-deep .dx-row {
        font-size: 15px;
        white-space: normal;
    }

    .txtBox{
        font-weight: bold;
    }

    /* ::ng-deep td[role="columnheader"]{
            text-align: center !important;
        }   */
</style>
