<div bsModal #createOrEditModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="createOrEditModal" aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form *ngIf="active" #impersonateForm="ngForm" novalidate (ngSubmit)="save()" autocomplete="off">
                <div class="modal-header">
                    <h4 class="modal-title">
                        <span *ngIf="impersonate.id">{{l("Chỉnh sửa ủy quyền")}}</span>
                        <span *ngIf="!impersonate.id">{{l("Thêm mới ủy quyền")}}</span>
                    </h4>
                    <button type="button" class="close" (click)="close()" aria-label="Close" [disabled]="saving">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
					<div class="row">
						<div class="col-md-6 col-xs-12 col-lg-6">
							<!-- <h4 style="color: black">Thông tin user</h4> -->
							<dx-form #impersonateForm [formData]="impersonate">
								<dxi-item itemType="group" caption="Người được ủy quyền" colCount="2">
									<dxi-item [colSpan]="2">
										<dxo-label text="Phòng ban"></dxo-label>
										<dx-select-box #impersonatedSelect [dataSource]="organizationUnits"
											displayExpr="displayName" valueExpr="id" [(value)]="selectedUnitId"
											(onSelectionChanged)="onSelectionChangedImpersonated($event)"
										></dx-select-box>
									</dxi-item>
									<dxi-item [colSpan]="2">
										<dxo-label text="Người được ủy quyền"></dxo-label>
										<dx-select-box #impersonatedSelectBox [dataSource]="listUsers" 
											displayExpr="fullName" valueExpr="id" [(value)]="currentUserId">
										</dx-select-box>
									</dxi-item>
								</dxi-item>
							</dx-form>
						</div>
						<div class="col-md-6 col-xs-12 col-lg-6">
							<dx-form #impersonateForm [formData]="impersonate">
								<dxi-item itemType="group" caption="Người ủy quyền" colCount="2">
									<dxi-item [colSpan]="2">
										<dxo-label text="Phòng ban"></dxo-label>
										<dx-select-box #organizationSelect [dataSource]="organizationUnits"
											displayExpr="displayName" valueExpr="id" [(value)]="impersonatedSelectedUnitId"
											(onSelectionChanged)="onSelectionChanged($event)"
										></dx-select-box>
									</dxi-item>
									<dxi-item [colSpan]="2">
										<dxo-label text="Người ủy quyền"></dxo-label>
										<dx-select-box #userListTagBox [dataSource]="listImpersonatedUsers" 
											displayExpr="fullName" valueExpr="id"
											[(value)]="selectedUser">
										</dx-select-box>
									</dxi-item>
									<dxi-item [colSpan]="2" dataField="startDate" editorType="dxDateBox" [editorOptions]="{
										displayFormat: 'dd/MM/yyyy',
										showClearButton: true
									}">
										<dxo-label text="Ngày bắt đầu"></dxo-label>
									</dxi-item>
									<dxi-item [colSpan]="2" dataField="endDate" editorType="dxDateBox" [editorOptions]="{
										displayFormat: 'dd/MM/yyyy',
										showClearButton: true
									}">
										<dxo-label text="Ngày kết thúc"></dxo-label>
									</dxi-item>
								</dxi-item>
							</dx-form>
							
						</div>
						<div class="col-md-6 col-xs-12 col-lg-6">
							<dx-check-box [(value)]="isActiveChkb" text="Hoạt động"></dx-check-box>
						</div>
					</div>
					
					<!-- <div class="form-group">
						<label for="Impersonate_UserId">{{l("UserId")}}</label>
						<input type="number" id="Impersonate_UserId" class="form-control" [(ngModel)]="impersonate.userId" name="UserId"  />
					</div>
		
					<div class="form-group">
						<label for="Impersonate_UserName">{{l("UserName")}}</label>
						<input type="text" id="Impersonate_UserName" class="form-control" [(ngModel)]="impersonate.userName" name="UserName"    />
					</div> -->
		
					<!-- <div class="form-group">
						<label for="Impersonate_ImpersonateUserId">{{l("ImpersonateUserId")}}</label>
						<input type="number" id="Impersonate_ImpersonateUserId" class="form-control" [(ngModel)]="impersonate.impersonateUserId" name="ImpersonateUserId"  />
					</div> -->

		
					<!-- <div class="form-group">
						<label for="Impersonate_ImpersonateUserName">{{l("ImpersonateUserName")}}</label>
						<input type="text" id="Impersonate_ImpersonateUserName" class="form-control" [(ngModel)]="impersonate.impersonateUserName" name="ImpersonateUserName"    />
					</div>
		
					<div class="form-group">
						<label for="Impersonate_StartDate">{{l("StartDate")}}</label>
							<input class="form-control m-input" type="datetime" bsDatepicker [(ngModel)]="startDate" id="Impersonate_StartDate" name="Impersonate_StartDate">
					</div>
		
					<div class="form-group">
						<label for="Impersonate_EndDate">{{l("EndDate")}}</label>
							<input required class="form-control m-input" type="datetime" bsDatepicker [(ngModel)]="impersonate.endDate" id="Impersonate_EndDate" name="Impersonate_EndDate">
					</div>
		
					<br/><div class="m-checkbox-list">
						<label for="Impersonate_IsActive" class="kt-checkbox">
							<input id="Impersonate_IsActive" type="checkbox" name="IsActive" [(ngModel)]="impersonate.isActive"> 
							{{l("IsActive")}}
							<span></span>
						</label>
					</div>
		
					<br/><div class="m-checkbox-list">
						<label for="Impersonate_IsDeleted" class="kt-checkbox">
							<input id="Impersonate_IsDeleted" type="checkbox" name="IsDeleted" [(ngModel)]="impersonate.isDeleted"> 
							{{l("IsDeleted")}}
							<span></span>
						</label>
					</div> -->

					<!-- <dx-form #documentForm [formData]="impersonate" [showValidationSummary]="true"
                        [showColonAfterLabel]="false" validationGroup="formValidateGroup">
                        <dxi-item itemType="group" caption="Thông tin văn bản" colCount="12">
						</dxi-item>
					</dx-form> -->

                </div>
                <div class="modal-footer">
					<dx-button [disabled]="saving" text="Đóng" (onClick)="close()"></dx-button>
					<dx-button text="Lưu" (onClick)="save()" type="success" icon="save"></dx-button>
                    <!-- <button [disabled]="saving" type="button" class="btn btn-default" (click)="save()" icon="fa fa-save">Đóng</button>
                    <button type="submit" class="btn btn-primary green" [disabled]="!impersonateForm.form.valid" [buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')"><i class="fa fa-save"></i> <span>Lưu</span></button> -->
                </div>
            </form>
        </div>
    </div>
</div>